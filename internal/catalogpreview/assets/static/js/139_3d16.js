(window.webpackJsonp_name_chunkhash_4_=window.webpackJsonp_name_chunkhash_4_||[]).push([[139],{"SA+o":function(e,t,r){"use strict";r.r(t);var n=r("q1tI"),a=r.n(n),s=r("SYuh"),i=r("aipG"),o=r("fQ5S"),c=r("1MYv"),l=r("NZDO"),d=r("5I82"),p=r("KOOk"),u=r("wPrF"),m=r("n7JV"),b=r("a20y"),h=r("+8Ma"),j=r("+uPJ"),y=r("Gqia"),x=r("uGfC"),v=r("9GMD"),O=r("Rfcb"),g=r.n(O),f=r("NluS"),w=r.n(f),k=r("aUsF"),_=r.n(k);var S=function(e){return t=>(e(t),t)};class C extends Error{constructor(e){super(e||"unknown error occurred while executing runner")}}function R(e,...t){try{return[e.apply(null,t),void 0]}catch(e){return e instanceof Error?[void 0,e]:(console.warn(),[void 0,new C])}}var A=r("J4nZ"),T=r("nKUr");t.default=({collectNamespace:e="if-required",patcher:t,validator:r,postInstallBlock:n,prompts:O=[],submitLabel:f="Apply",summaryBlock:k,title:C="Wizard",initialVariables:E,onSubmit:I,...q})=>{var N;let J=Object.assign([],O||[]);const[B,D]=a.a.useState(),F=a.a.useCallback(e=>I(e,!!B),[I,B]),[G,M]=a.a.useState(),L=a.a.useRef({}),P=a.a.useCallback(w()((e,n)=>new Promise((a,s)=>{const[i,o]=R(t,e);o?a({type:"patch-err",err:o}):r(i,n).then(e=>{e&&e.length>0&&a({type:"submit-err",errs:e}),a(void 0)},s)}).catch(e=>({type:"internal-err",err:e instanceof Error?e:new Error("unknown error")})).then(e=>e&&{__global:e}),850,{leading:!0}),[t,r]),V=a.a.useCallback(async e=>{if(_()({overwrite:B,vars:e},Object(A.d)(L.current,"vars","overwrite")))return L.current.err;L.current.vars=e,L.current.overwrite=B,M("pending");const t=await P(e,!!B);return S(e=>{M(null==e?void 0:e.__global),L.current.err=e})(t)},[B,M,P]),Y=Object(s.a)();("always"===e||!Y.namespace&&"never"!==e)&&(J[0]&&"section"!==J[0].type&&(J=[{type:"section",title:"Installer"},...J]),J=[{type:"section",title:"Select Namespace"},{type:"markdown",body:"Select the namespace and cluster in-which you would like to _install_ the integration."},{type:"question",name:"__hidden.namespace",input:{type:"string",title:"Namespace",default:Y.namespace,pattern:"^[\\w.\\-:]+$",patternTitle:"may only contain letters, numbers, periods, colons, and dashes"},required:!0},{type:"question",name:"__hidden.cluster",input:{type:"string",title:"Cluster",default:Y.cluster}},...J]);let $=n;return $||($=[{type:"section",title:"Success"},{type:"custom",Component:()=>Object(T.jsx)("div",{style:{textAlign:"center"},children:Object(T.jsx)(v.a,{style:{maxHeight:"9rem"},pose:"happy",color:"secondary"})})},{type:"markdown",body:"<h3 align='center'>The integration was successfully installed.</h3>"}]),n&&"section"!==(null===(N=n[0])||void 0===N?void 0:N.type)&&($=[{type:"section",title:"Next Steps"},...n]),k=a.a.useMemo(()=>k||(t?"pending"!==G&&"internal-err"===(null==G?void 0:G.type)?[{type:"section",title:"Summary"},{type:"custom",Component:()=>Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("p",{children:Object(T.jsx)(j.a,{variant:"text",children:"The following resources will be applied..."})}),Object(T.jsx)("p",{children:Object(T.jsx)(j.a,{variant:"text",children:"test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test"})})]})}]:"pending"!==G&&"patch-err"===(null==G?void 0:G.type)?[{type:"section",title:"Summary"},{type:"custom",Component:()=>Object(T.jsx)("div",{style:{textAlign:"center"},children:Object(T.jsx)(v.a,{style:{maxHeight:"9rem"},pose:"sad",color:"secondary"})})},{type:"markdown",body:"<h5 align='center'>An unrecoverable error occurred.</h5>"},{type:"custom",Component:()=>Object(T.jsx)(p.a,{children:Object(T.jsx)(u.a,{language:"javascript",component:"code",code:G.err.message+"\n"+G.err.stack})})}]:[{type:"section",title:"Summary"},{type:"custom",Component:e=>{const[r,n]=R(t,e.variables);if(n)return console.error("error occurred while applying patch:",n),null;const a=e=>{if("pending"!==G&&"submit-err"===(null==G?void 0:G.type))return G.errs.find(t=>{return r=t.resource,n=e,_()(Object(A.d)(r,"api_version","type","metadata"),Object(A.d)(n,"api_version","type","metadata"));var r,n})};let s=!1;return"pending"!==G&&"submit-err"===(null==G?void 0:G.type)&&(s=!!G.errs.find(e=>"ERR_ALREADY_EXISTS"===e.code)),Object(T.jsxs)(T.Fragment,{children:[(s||void 0!==B)&&Object(T.jsxs)(y.a,{sx:{display:"flex",backgroundColor:e=>B?e.palette.info.main:e.palette.error.main,color:e=>B?e.palette.info.contrastText:e.palette.error.contrastText,transition:e=>e.transitions.create("background",{duration:800}),borderRadius:1,px:2,py:1},paragraph:!0,children:[Object(T.jsx)(l.a,{flex:"1 1 auto",marginRight:1,children:"One or more resources conflict with ones already in the system. Rename the existing resources or overwrite to continue installation."}),Object(T.jsx)(l.a,{display:"flex",flexShrink:"0",flexDirection:"column",justifyContent:"center",children:Object(T.jsx)(d.a,{color:"inherit",variant:"outlined",onClick:()=>D(e=>!e),startIcon:Object(T.jsx)(m.a,{of:B?"radioOn":"radioOff"}),children:"overwrite"})})]}),Object(T.jsx)(b.a,{md:"The following resources will be applied..."}),Object(T.jsx)(l.a,{children:r.map((e,t)=>Object(T.jsxs)(i.a,{children:[Object(T.jsxs)(c.a,{expandIcon:Object(T.jsx)(m.a,{of:"expand"}),"aria-controls":`panel-${t}-content`,id:`panel-${t}-header`,children:[Object(T.jsx)(y.a,{sx:{width:"28px",flexShrink:0},children:a(e)&&Object(T.jsx)(m.a,{of:"error",color:"error",fontSize:"small",style:{verticalAlign:"middle"}})}),Object(T.jsx)(y.a,{sx:{width:"60%",flexShrink:0},children:e.metadata.name}),Object(T.jsxs)(y.a,{sx:{color:"text.secondary"},children:[e.api_version," ",e.type]})]}),Object(T.jsxs)(o.a,{children:[g()(e=>e&&Object(T.jsx)(y.a,{sx:{backgroundColor:e=>e.palette.warning.main,color:e=>e.palette.warning.contrastText,borderRadius:.5,px:2,py:1},children:Object(T.jsx)("code",{children:e.code+": "+e.message})}),a)(e),Object(T.jsx)(x.a,{data:e})]})]},e.metadata.name))})]})}}]:void 0),[k,t,B,D,G]),Object(T.jsx)(h.b,{...q,blocks:J,completionBlock:$,submitLabel:f,summaryBlock:k,validator:V,onSubmit:F,initialVariables:E,title:C})}}}]);
//# sourceMappingURL=139_3d16.js.map